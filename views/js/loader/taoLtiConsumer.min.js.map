{"version":3,"sources":["../util/providers/ltiProvider.js","../util/forms/deliveryFormHelper.js","../../taoLtiConsumerCss/wizard!css","../controller/DeliveryMgmt/wizard.js","../controller/routes.js","onLayerEnd0.js","module-create.js","/github/workspace/tao/views/build/config-wrap-end-default.js"],"names":[],"mappings":"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","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\n/**\n * @author Martin Nicholson <martin@taotesting.com>\n */\ndefine('taoLtiConsumer/util/providers/ltiProvider',[\n    'jquery',\n    'i18n',\n    'util/url'\n], function ($, __, urlUtils) {\n    'use strict';\n\n    var providers = {\n        /**\n         * List available Lti providers\n         * @param {Object} data - the query parameters\n         * @returns {Promise}\n         */\n        listLtiProviders(data) {\n            return new Promise(function(resolve, reject) {\n                $.ajax({\n                    url: urlUtils.route('getAvailableLtiProviders', 'DeliveryMgmt', 'taoLtiConsumer'),\n                    data: {\n                        q: data.q,\n                        page: data.page\n                    },\n                    type: 'GET',\n                    dataType: 'JSON'\n                }).done(function(tests) {\n                    if (tests) {\n                        resolve(tests);\n                    } else {\n                        reject(new Error(__('Unable to load LTI providers')));\n                    }\n                }).fail(function() {\n                    reject(new Error(__('Unable to load LTI providers')));\n                });\n            });\n        }\n    };\n\n    return providers;\n\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\n/**\n * @author Martin Nicholson <martin@taotesting.com>\n */\ndefine('taoLtiConsumer/util/forms/deliveryFormHelper',[\n    'jquery',\n    'i18n',\n    'taoDeliveryRdf/util/forms/deliveryFormHelper'\n], function ($, __, deliveryFormHelper) {\n    'use strict';\n\n    return {\n        /**\n         * Set up the wizard form for publishing a LTI-based delivery\n         * @param {jQuery} $form\n         * @param {Object} providers - contains function(s) for fetching data\n         */\n        setupLtiForm($form, providers) {\n            const $reportContainer = $form.closest('.content-block');\n            const $providerFilterContainer = $('.lti-provider-select-container', $form);\n            const $providerInputElement = $('#ltiProvider', $form);\n\n            // Replace submit button with taskQueue requester\n            const ltiTaskButton = deliveryFormHelper.replaceSubmitWithTaskButton({\n                $form,\n                $reportContainer\n            });\n\n            // Enhanced selector input for LTI providers:\n            deliveryFormHelper.createSelectorInput({\n                $filterContainer: $providerFilterContainer,\n                $inputElement: $providerInputElement,\n                taskButton: ltiTaskButton,\n                dataProvider: {\n                    list: providers.listLtiProviders\n                },\n                inputPlaceholder: __('Select the Provider you want to publish'),\n                inputLabel: __('LTI Provider')\n            });\n        }\n    };\n});\n\n","\ndefine('css!taoLtiConsumerCss/wizard',[],function(){});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technlogies SA\n *\n */\n/**\n * @author Martin Nicholson <martin@taotesting.com>\n */\ndefine('taoLtiConsumer/controller/DeliveryMgmt/wizard',[\n    'jquery',\n    'taoDeliveryRdf/util/providers/testsProvider',\n    'taoLtiConsumer/util/providers/ltiProvider',\n    'taoDeliveryRdf/util/forms/deliveryFormHelper',\n    'taoLtiConsumer/util/forms/deliveryFormHelper',\n    'ui/tabs',\n    'css!taoLtiConsumerCss/wizard.css'\n], function($, testsProvider, ltiProvider, rdfDeliveryFormHelper, ltiDeliveryFormHelper, tabsFactory) {\n    'use strict';\n\n    // Extend data & behaviour providers:\n    const providers = Object.assign({}, testsProvider, ltiProvider);\n    const deliveryFormHelper = Object.assign({}, rdfDeliveryFormHelper, ltiDeliveryFormHelper);\n\n    return {\n        /**\n         * Creates a tabs component if multiple forms rendered\n         * Initialises the special input fields in the forms\n         * @returns {void}\n         */\n        start() {\n            const $multiForm = $('.multi-form-container');\n\n            // Extract tabs config from HTML data attrs:\n            const tabsData = $('[data-tab-content]', $multiForm)\n                .toArray()\n                .map(el => ({\n                    label: $(el).data('tab-label'),\n                    name: $(el).data('tab-content')\n                }));\n\n            const $tabContainer = $('.tab-selector', $multiForm);\n            const $tabsConstentContainer = $('.main-container');\n\n            tabsFactory($tabContainer, {\n                showHideTarget: $tabsConstentContainer,\n                tabs: tabsData\n            });\n\n            const tabNames = tabsData.map(t => t.name);\n\n            if (tabNames.includes('tao-local')) {\n                this.setupTaoLocalForm();\n            }\n            if (tabNames.includes('lti-based')) {\n                this.setupLtiForm();\n            }\n        },\n\n        // calls setup from taoDeliveryRdf\n        setupTaoLocalForm() {\n            const $tabContent = $('[data-tab-content=\"tao-local\"]');\n            const $form = $('#simpleWizard', $tabContent);\n\n            deliveryFormHelper.setupTaoLocalForm($form, providers);\n        },\n\n        // calls setup from taoLtiConsumer\n        setupLtiForm() {\n            const $tabContent = $('[data-tab-content=\"lti-based\"]');\n            const $form = $('#simpleLtiWizard', $tabContent);\n\n            deliveryFormHelper.setupLtiForm($form, providers);\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technlogies SA\n *\n */\n\ndefine('taoLtiConsumer/controller/routes',{\n    'DeliveryMgmt': {\n        'actions' : {\n            'wizard' : 'controller/DeliveryMgmt/wizard'\n        }\n    },\n});\n\n","\n(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('.section-container .content-block .multi-form-container{background:#f3f1ef;padding:30px;border:1px #ddd solid;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;min-width:550px}.section-container .content-block .multi-form-container form{background:inherit;padding:0;border:none}.section-container .content-block .multi-form-container form .form-toolbar .loading-button{float:right}.section-container .content-block .multi-form-container nav{margin-bottom:30px}\\n\\n/*# sourceMappingURL=taoLtiConsumerCss/wizard.css.map */');\n","\ndefine(\"taoLtiConsumer/loader/taoLtiConsumer.bundle\", function(){});\n","define(\"taoLtiConsumer/loader/taoLtiConsumer.min\", [\"taoDeliveryRdf/loader/taoDeliveryRdf.min\"], function(){});\n"]}
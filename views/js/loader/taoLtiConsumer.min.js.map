{"version":3,"sources":["../util/providers/ltiProvider.js","../util/forms/deliveryFormHelper.js","../../taoLtiConsumerCss/wizard!css","../controller/DeliveryMgmt/wizard.js","../controller/routes.js","onLayerEnd0.js","module-create.js","/Users/ik/dev/running/selor/tao/views/build/config-wrap-end-default.js"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2019 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\r\n *\r\n */\r\n/**\r\n * @author Martin Nicholson <martin@taotesting.com>\r\n */\r\ndefine('taoLtiConsumer/util/providers/ltiProvider',[\r\n    'jquery',\r\n    'i18n',\r\n    'util/url'\r\n], function ($, __, urlUtils) {\r\n    'use strict';\r\n\r\n    var providers = {\r\n        /**\r\n         * List available Lti providers\r\n         * @param {Object} data - the query parameters\r\n         * @returns {Promise}\r\n         */\r\n        listLtiProviders(data) {\r\n            return new Promise(function(resolve, reject) {\r\n                $.ajax({\r\n                    url: urlUtils.route('getAvailableLtiProviders', 'DeliveryMgmt', 'taoLtiConsumer'),\r\n                    data: {\r\n                        q: data.q,\r\n                        page: data.page\r\n                    },\r\n                    type: 'GET',\r\n                    dataType: 'JSON'\r\n                }).done(function(tests) {\r\n                    if (tests) {\r\n                        resolve(tests);\r\n                    } else {\r\n                        reject(new Error(__('Unable to load LTI providers')));\r\n                    }\r\n                }).fail(function() {\r\n                    reject(new Error(__('Unable to load LTI providers')));\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    return providers;\r\n\r\n});\r\n\n","/**\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2019 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\r\n *\r\n */\r\n/**\r\n * @author Martin Nicholson <martin@taotesting.com>\r\n */\r\ndefine('taoLtiConsumer/util/forms/deliveryFormHelper',[\r\n    'jquery',\r\n    'i18n',\r\n    'taoDeliveryRdf/util/forms/deliveryFormHelper'\r\n], function ($, __, deliveryFormHelper) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Set up the wizard form for publishing a LTI-based delivery\r\n         * @param {jQuery} $form\r\n         * @param {Object} providers - contains function(s) for fetching data\r\n         */\r\n        setupLtiForm($form, providers) {\r\n            const $reportContainer = $form.closest('.content-block');\r\n            const $providerFilterContainer = $('.lti-provider-select-container', $form);\r\n            const $providerInputElement = $('#ltiProvider', $form);\r\n\r\n            // Replace submit button with taskQueue requester\r\n            const ltiTaskButton = deliveryFormHelper.replaceSubmitWithTaskButton({\r\n                $form,\r\n                $reportContainer\r\n            });\r\n\r\n            // Enhanced selector input for LTI providers:\r\n            deliveryFormHelper.createSelectorInput({\r\n                $filterContainer: $providerFilterContainer,\r\n                $inputElement: $providerInputElement,\r\n                taskButton: ltiTaskButton,\r\n                dataProvider: {\r\n                    list: providers.listLtiProviders\r\n                },\r\n                inputPlaceholder: __('Select the Provider you want to publish'),\r\n                inputLabel: __('LTI Provider')\r\n            });\r\n        }\r\n    };\r\n});\r\n\n","\ndefine('css!taoLtiConsumerCss/wizard',[],function(){});\n","/*\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2019 (original work) Open Assessment Technlogies SA\r\n *\r\n */\r\n/**\r\n * @author Martin Nicholson <martin@taotesting.com>\r\n */\r\ndefine('taoLtiConsumer/controller/DeliveryMgmt/wizard',[\r\n    'jquery',\r\n    'taoDeliveryRdf/util/providers/testsProvider',\r\n    'taoLtiConsumer/util/providers/ltiProvider',\r\n    'taoDeliveryRdf/util/forms/deliveryFormHelper',\r\n    'taoLtiConsumer/util/forms/deliveryFormHelper',\r\n    'ui/tabs',\r\n    'css!taoLtiConsumerCss/wizard.css'\r\n], function($, testsProvider, ltiProvider, rdfDeliveryFormHelper, ltiDeliveryFormHelper, tabsComponent) {\r\n    'use strict';\r\n\r\n    // Extend data & behaviour providers:\r\n    const providers = Object.assign({}, testsProvider, ltiProvider);\r\n    const deliveryFormHelper = Object.assign({}, rdfDeliveryFormHelper, ltiDeliveryFormHelper);\r\n\r\n    return {\r\n        /**\r\n         * Creates a tabs component if multiple forms rendered\r\n         * Initialises the special input fields in the forms\r\n         * @returns {void}\r\n         */\r\n        start() {\r\n            const $multiForm = $('.multi-form-container');\r\n\r\n            // Extract tabs config from HTML data attrs:\r\n            const tabsData = $('[data-tab-content]', $multiForm)\r\n                .toArray()\r\n                .map(el => ({\r\n                    label: $(el).data('tab-label'),\r\n                    name: $(el).data('tab-content')\r\n                }));\r\n\r\n            if (tabsData.length > 1) {\r\n                tabsComponent({\r\n                    renderTo: $('.tab-selector', $multiForm),\r\n                    tabs: tabsData\r\n                });\r\n            }\r\n\r\n            const tabNames = tabsData.map(t => t.name);\r\n\r\n            if (tabNames.includes('tao-local')) {\r\n                this.setupTaoLocalForm();\r\n            }\r\n            if (tabNames.includes('lti-based')) {\r\n                this.setupLtiForm();\r\n            }\r\n        },\r\n\r\n        // calls setup from taoDeliveryRdf\r\n        setupTaoLocalForm() {\r\n            const $tabContent = $('[data-tab-content=\"tao-local\"]');\r\n            const $form = $('#simpleWizard', $tabContent);\r\n\r\n            deliveryFormHelper.setupTaoLocalForm($form, providers);\r\n        },\r\n\r\n        // calls setup from taoLtiConsumer\r\n        setupLtiForm() {\r\n            const $tabContent = $('[data-tab-content=\"lti-based\"]');\r\n            const $form = $('#simpleLtiWizard', $tabContent);\r\n\r\n            deliveryFormHelper.setupLtiForm($form, providers);\r\n        }\r\n    };\r\n});\r\n\n","/*\r\n * This program is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU General Public License\r\n * as published by the Free Software Foundation; under version 2\r\n * of the License (non-upgradable).\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program; if not, write to the Free Software\r\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n *\r\n * Copyright (c) 2019 (original work) Open Assessment Technlogies SA\r\n *\r\n */\r\n\r\ndefine('taoLtiConsumer/controller/routes',{\r\n    'DeliveryMgmt': {\r\n        'actions' : {\r\n            'wizard' : 'controller/DeliveryMgmt/wizard'\r\n        }\r\n    },\r\n});\r\n\n","\n(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('.section-container .content-block .multi-form-container{background:#f3f1ef;padding:30px;border:1px #ddd solid;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;min-width:550px}.section-container .content-block .multi-form-container form{background:inherit;padding:0;border:none}.section-container .content-block .multi-form-container form .form-toolbar .loading-button{float:right}.section-container .content-block .multi-form-container nav{margin-bottom:30px}\\n\\n/*# sourceMappingURL=wizard.css.map */');\n","\ndefine(\"taoLtiConsumer/loader/taoLtiConsumer.bundle\", function(){});\n","define(\"taoLtiConsumer/loader/taoLtiConsumer.min\", [\"taoDeliveryRdf/loader/taoDeliveryRdf.min\"], function(){});\n"]}
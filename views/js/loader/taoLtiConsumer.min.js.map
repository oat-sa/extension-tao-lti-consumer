{"version":3,"names":["define","$","__","urlUtils","providers","listLtiProviders","data","Promise","resolve","reject","ajax","url","route","q","page","type","dataType","done","tests","Error","fail","deliveryFormHelper","setupLtiForm","$form","$reportContainer","closest","$providerFilterContainer","$providerInputElement","ltiTaskButton","replaceSubmitWithTaskButton","createSelectorInput","$filterContainer","$inputElement","taskButton","dataProvider","list","inputPlaceholder","inputLabel","testsProvider","ltiProvider","rdfDeliveryFormHelper","ltiDeliveryFormHelper","tabsFactory","Object","assign","start","$multiForm","tabsData","toArray","map","el","label","name","$tabContainer","$tabsConstentContainer","showHideTarget","tabs","tabNames","t","includes","setupTaoLocalForm","$tabContent","DeliveryMgmt","actions","wizard","c","d","document","a","i","s","createElement","getElementsByTagName","appendChild","styleSheet","cssText","createTextNode"],"sources":["/github/workspace/tao/views/build/config-wrap-start-default.js","../util/providers/ltiProvider.js","../util/forms/deliveryFormHelper.js","../../taoLtiConsumerCss/wizard!css","../controller/DeliveryMgmt/wizard.js","../controller/routes.js","onLayerEnd0.js","module-create.js","/github/workspace/tao/views/build/config-wrap-end-default.js"],"sourcesContent":["\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\n/**\n * @author Martin Nicholson <martin@taotesting.com>\n */\ndefine('taoLtiConsumer/util/providers/ltiProvider',[\n    'jquery',\n    'i18n',\n    'util/url'\n], function ($, __, urlUtils) {\n    'use strict';\n\n    var providers = {\n        /**\n         * List available Lti providers\n         * @param {Object} data - the query parameters\n         * @returns {Promise}\n         */\n        listLtiProviders(data) {\n            return new Promise(function(resolve, reject) {\n                $.ajax({\n                    url: urlUtils.route('getAvailableLtiProviders', 'DeliveryMgmt', 'taoLtiConsumer'),\n                    data: {\n                        q: data.q,\n                        page: data.page\n                    },\n                    type: 'GET',\n                    dataType: 'JSON'\n                }).done(function(tests) {\n                    if (tests) {\n                        resolve(tests);\n                    } else {\n                        reject(new Error(__('Unable to load LTI providers')));\n                    }\n                }).fail(function() {\n                    reject(new Error(__('Unable to load LTI providers')));\n                });\n            });\n        }\n    };\n\n    return providers;\n\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\n/**\n * @author Martin Nicholson <martin@taotesting.com>\n */\ndefine('taoLtiConsumer/util/forms/deliveryFormHelper',[\n    'jquery',\n    'i18n',\n    'taoDeliveryRdf/util/forms/deliveryFormHelper'\n], function ($, __, deliveryFormHelper) {\n    'use strict';\n\n    return {\n        /**\n         * Set up the wizard form for publishing a LTI-based delivery\n         * @param {jQuery} $form\n         * @param {Object} providers - contains function(s) for fetching data\n         */\n        setupLtiForm($form, providers) {\n            const $reportContainer = $form.closest('.content-block');\n            const $providerFilterContainer = $('.lti-provider-select-container', $form);\n            const $providerInputElement = $('#ltiProvider', $form);\n\n            // Replace submit button with taskQueue requester\n            const ltiTaskButton = deliveryFormHelper.replaceSubmitWithTaskButton({\n                $form,\n                $reportContainer\n            });\n\n            // Enhanced selector input for LTI providers:\n            deliveryFormHelper.createSelectorInput({\n                $filterContainer: $providerFilterContainer,\n                $inputElement: $providerInputElement,\n                taskButton: ltiTaskButton,\n                dataProvider: {\n                    list: providers.listLtiProviders\n                },\n                inputPlaceholder: __('Select the Provider you want to publish'),\n                inputLabel: __('LTI Provider')\n            });\n        }\n    };\n});\n\n","\ndefine('css!taoLtiConsumerCss/wizard',[],function(){});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technlogies SA\n *\n */\n/**\n * @author Martin Nicholson <martin@taotesting.com>\n */\ndefine('taoLtiConsumer/controller/DeliveryMgmt/wizard',[\n    'jquery',\n    'taoDeliveryRdf/util/providers/testsProvider',\n    'taoLtiConsumer/util/providers/ltiProvider',\n    'taoDeliveryRdf/util/forms/deliveryFormHelper',\n    'taoLtiConsumer/util/forms/deliveryFormHelper',\n    'ui/tabs',\n    'css!taoLtiConsumerCss/wizard.css'\n], function($, testsProvider, ltiProvider, rdfDeliveryFormHelper, ltiDeliveryFormHelper, tabsFactory) {\n    'use strict';\n\n    // Extend data & behaviour providers:\n    const providers = Object.assign({}, testsProvider, ltiProvider);\n    const deliveryFormHelper = Object.assign({}, rdfDeliveryFormHelper, ltiDeliveryFormHelper);\n\n    return {\n        /**\n         * Creates a tabs component if multiple forms rendered\n         * Initialises the special input fields in the forms\n         * @returns {void}\n         */\n        start() {\n            const $multiForm = $('.multi-form-container');\n\n            // Extract tabs config from HTML data attrs:\n            const tabsData = $('[data-tab-content]', $multiForm)\n                .toArray()\n                .map(el => ({\n                    label: $(el).data('tab-label'),\n                    name: $(el).data('tab-content')\n                }));\n\n            const $tabContainer = $('.tab-selector', $multiForm);\n            const $tabsConstentContainer = $('.main-container');\n\n            tabsFactory($tabContainer, {\n                showHideTarget: $tabsConstentContainer,\n                tabs: tabsData\n            });\n\n            const tabNames = tabsData.map(t => t.name);\n\n            if (tabNames.includes('tao-local')) {\n                this.setupTaoLocalForm();\n            }\n            if (tabNames.includes('lti-based')) {\n                this.setupLtiForm();\n            }\n        },\n\n        // calls setup from taoDeliveryRdf\n        setupTaoLocalForm() {\n            const $tabContent = $('[data-tab-content=\"tao-local\"]');\n            const $form = $('#simpleWizard', $tabContent);\n\n            deliveryFormHelper.setupTaoLocalForm($form, providers);\n        },\n\n        // calls setup from taoLtiConsumer\n        setupLtiForm() {\n            const $tabContent = $('[data-tab-content=\"lti-based\"]');\n            const $form = $('#simpleLtiWizard', $tabContent);\n\n            deliveryFormHelper.setupLtiForm($form, providers);\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technlogies SA\n *\n */\n\ndefine('taoLtiConsumer/controller/routes',{\n    'DeliveryMgmt': {\n        'actions' : {\n            'wizard' : 'controller/DeliveryMgmt/wizard'\n        }\n    },\n});\n\n","\n(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('.section-container .content-block .multi-form-container{background:#f3f1ef;padding:30px;border:1px #ddd solid;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;min-width:550px}.section-container .content-block .multi-form-container form{background:inherit;padding:0;border:none}.section-container .content-block .multi-form-container form .form-toolbar .loading-button{float:right}.section-container .content-block .multi-form-container nav{padding-bottom:30px}\\n\\n/*# sourceMappingURL=taoLtiConsumerCss/wizard.css.map */');\n","\ndefine(\"taoLtiConsumer/loader/taoLtiConsumer.bundle\", function(){});\n","define(\"taoLtiConsumer/loader/taoLtiConsumer.min\", [\"taoDeliveryRdf/loader/taoDeliveryRdf.min\"], function(){});\n"],"mappings":"ACqBAA,MAAA,8CACA,SACA,OACA,WACA,UAAAC,CAAA,CAAAC,EAAA,CAAAC,QAAA,EACA,aAEA,IAAAC,SAAA,EAMAC,iBAAAC,IAAA,EACA,WAAAC,OAAA,UAAAC,OAAA,CAAAC,MAAA,EACAR,CAAA,CAAAS,IAAA,EACAC,GAAA,CAAAR,QAAA,CAAAS,KAAA,6DACAN,IAAA,EACAO,CAAA,CAAAP,IAAA,CAAAO,CAAA,CACAC,IAAA,CAAAR,IAAA,CAAAQ,IACA,EACAC,IAAA,OACAC,QAAA,OACA,GAAAC,IAAA,UAAAC,KAAA,EACAA,KAAA,CACAV,OAAA,CAAAU,KAAA,EAEAT,MAAA,KAAAU,KAAA,CAAAjB,EAAA,kCAEA,GAAAkB,IAAA,YACAX,MAAA,KAAAU,KAAA,CAAAjB,EAAA,kCACA,EACA,EACA,CACA,EAEA,OAAAE,SAEA,GCtCAJ,MAAA,iDACA,SACA,OACA,+CACA,UAAAC,CAAA,CAAAC,EAAA,CAAAmB,kBAAA,EACA,aAEA,OAMAC,aAAAC,KAAA,CAAAnB,SAAA,OACA,CAAAoB,gBAAA,CAAAD,KAAA,CAAAE,OAAA,mBACAC,wBAAA,CAAAzB,CAAA,kCAAAsB,KAAA,EACAI,qBAAA,CAAA1B,CAAA,gBAAAsB,KAAA,EAGAK,aAAA,CAAAP,kBAAA,CAAAQ,2BAAA,EACAN,KAAA,CACAC,gBACA,GAGAH,kBAAA,CAAAS,mBAAA,EACAC,gBAAA,CAAAL,wBAAA,CACAM,aAAA,CAAAL,qBAAA,CACAM,UAAA,CAAAL,aAAA,CACAM,YAAA,EACAC,IAAA,CAAA/B,SAAA,CAAAC,gBACA,EACA+B,gBAAA,CAAAlC,EAAA,4CACAmC,UAAA,CAAAnC,EAAA,gBACA,EACA,CACA,CACA,GCzDAF,MAAA,iDCoBAA,MAAA,kDACA,SACA,8CACA,4CACA,+CACA,+CACA,UACA,mCACA,UAAAC,CAAA,CAAAqC,aAAA,CAAAC,WAAA,CAAAC,qBAAA,CAAAC,qBAAA,CAAAC,WAAA,EACA,kBAGA,CAAAtC,SAAA,CAAAuC,MAAA,CAAAC,MAAA,IAAAN,aAAA,CAAAC,WAAA,EACAlB,kBAAA,CAAAsB,MAAA,CAAAC,MAAA,IAAAJ,qBAAA,CAAAC,qBAAA,EAEA,OAMAI,MAAA,OACA,CAAAC,UAAA,CAAA7C,CAAA,0BAGA8C,QAAA,CAAA9C,CAAA,sBAAA6C,UAAA,EACAE,OAAA,GACAC,GAAA,CAAAC,EAAA,IACAC,KAAA,CAAAlD,CAAA,CAAAiD,EAAA,EAAA5C,IAAA,cACA8C,IAAA,CAAAnD,CAAA,CAAAiD,EAAA,EAAA5C,IAAA,eACA,IAEA+C,aAAA,CAAApD,CAAA,iBAAA6C,UAAA,EACAQ,sBAAA,CAAArD,CAAA,oBAEAyC,WAAA,CAAAW,aAAA,EACAE,cAAA,CAAAD,sBAAA,CACAE,IAAA,CAAAT,QACA,GAEA,MAAAU,QAAA,CAAAV,QAAA,CAAAE,GAAA,CAAAS,CAAA,EAAAA,CAAA,CAAAN,IAAA,EAEAK,QAAA,CAAAE,QAAA,eACA,KAAAC,iBAAA,GAEAH,QAAA,CAAAE,QAAA,eACA,KAAArC,YAAA,EAEA,EAGAsC,kBAAA,OACA,CAAAC,WAAA,CAAA5D,CAAA,qCACAsB,KAAA,CAAAtB,CAAA,iBAAA4D,WAAA,EAEAxC,kBAAA,CAAAuC,iBAAA,CAAArC,KAAA,CAAAnB,SAAA,CACA,EAGAkB,aAAA,OACA,CAAAuC,WAAA,CAAA5D,CAAA,qCACAsB,KAAA,CAAAtB,CAAA,oBAAA4D,WAAA,EAEAxC,kBAAA,CAAAC,YAAA,CAAAC,KAAA,CAAAnB,SAAA,CACA,CACA,CACA,GCpEAJ,MAAA,qCACA8D,YAAA,EACAC,OAAA,EACAC,MAAA,iCACA,CACA,CACA,GCxBA,SAAAC,CAAA,MAAAC,CAAA,CAAAC,QAAA,CAAAC,CAAA,eAAAC,CAAA,cAAAC,CAAA,CAAAJ,CAAA,CAAAK,aAAA,UAAAD,CAAA,CAAAvD,IAAA,YAAAmD,CAAA,CAAAM,oBAAA,YAAAC,WAAA,CAAAH,CAAA,EAAAA,CAAA,CAAAI,UAAA,CAAAJ,CAAA,CAAAI,UAAA,CAAAC,OAAA,CAAAV,CAAA,CAAAK,CAAA,CAAAG,WAAA,CAAAP,CAAA,CAAAU,cAAA,CAAAX,CAAA,IACA,2gBCDAjE,MAAA,6DACAA,MCFA"}
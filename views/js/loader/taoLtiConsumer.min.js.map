{"version":3,"mappings":"AAqBAA,oDACA,QADA,CAEA,MAFA,CAGA,UAHA,EAIA,wBACA,aAEA,eAMAC,gBANA,2BAMAC,IANA,CAMA,CACA,4CACAC,QACAC,8EADA,CAEAF,MACAG,QADA,CAEAC,cAFA,CAFA,CAMAC,UANA,CAOAC,eAPA,GAQAC,IARA,CAQA,gBACAC,KADA,CAEAC,cAFA,CAIAC,qDAEA,CAdA,EAcAC,IAdA,CAcA,WACAD,qDACA,CAhBA,CAiBA,CAlBA,CAmBA,CA1BA,EA6BA,gBAEA,CAtCA,C,CCAAZ,uDACA,QADA,CAEA,MAFA,CAGA,8CAHA,EAIA,kCACA,aAEA,OAMAc,YANA,uBAMAC,KANA,CAMAC,SANA,CAMA,IACAC,iDADA,CAEAC,kEAFA,CAGAC,6CAHA,CAMAC,8DACAL,WADA,CAEAE,iCAFA,EANA,CAYAI,wCACAC,yCADA,CAEAC,mCAFA,CAGAC,wBAHA,CAIAC,cACAC,+BADA,CAJA,CAOAC,8DAPA,CAQAC,6BARA,EAUA,CA5BA,CA8BA,CArCA,C,CCpBA5B,sD,CCoBAA,wDACA,QADA,CAEA,6CAFA,CAGA,2CAHA,CAIA,8CAJA,CAKA,8CALA,CAMA,SANA,CAOA,kCAPA,EAQA,8FACA,aADA,GAIAgB,sDAJA,CAKAK,gFALA,CAOA,OAMAQ,KANA,iBAMA,IACAC,sCADA,CAIAC,4CACAC,OADA,GAEAC,GAFA,CAEA,oBACAC,6BADA,CAEAC,8BAFA,EAFA,CAJA,CAWAC,2CAXA,CAYAC,2CAZA,CAcAC,2BACAC,qCADA,CAEAC,aAFA,EAdA,CAmBA,sDAEAC,8BArBA,EAsBA,wBAtBA,CAwBAA,8BAxBA,EAyBA,mBAEA,CAjCA,CAoCAC,iBApCA,6BAoCA,IACAC,kDADA,CAEA5B,oCAFA,CAIAM,qDACA,CAzCA,CA4CAP,YA5CA,wBA4CA,IACA6B,kDADA,CAEA5B,uCAFA,CAIAM,gDACA,CAjDA,CAmDA,CAlEA,C,CCFArB,2CACA,cACA,SACA,uCADA,CADA,CADA,E,CClBA,gOACA,wgBADA,C,CCAAA,kE,CACAA,MCFA,sG","names":["define","listLtiProviders","data","$","url","q","page","type","dataType","done","tests","resolve","reject","fail","setupLtiForm","$form","providers","$reportContainer","$providerFilterContainer","$providerInputElement","ltiTaskButton","deliveryFormHelper","$filterContainer","$inputElement","taskButton","dataProvider","list","inputPlaceholder","inputLabel","start","$multiForm","tabsData","toArray","map","label","name","$tabContainer","$tabsConstentContainer","tabsFactory","showHideTarget","tabs","tabNames","setupTaoLocalForm","$tabContent"],"sources":["../util/providers/ltiProvider.js","../util/forms/deliveryFormHelper.js","../../taoLtiConsumerCss/wizard!css","../controller/DeliveryMgmt/wizard.js","../controller/routes.js","onLayerEnd0.js","module-create.js","/github/workspace/tao/views/build/config-wrap-end-default.js"],"sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\n/**\n * @author Martin Nicholson <martin@taotesting.com>\n */\ndefine('taoLtiConsumer/util/providers/ltiProvider',[\n    'jquery',\n    'i18n',\n    'util/url'\n], function ($, __, urlUtils) {\n    'use strict';\n\n    var providers = {\n        /**\n         * List available Lti providers\n         * @param {Object} data - the query parameters\n         * @returns {Promise}\n         */\n        listLtiProviders(data) {\n            return new Promise(function(resolve, reject) {\n                $.ajax({\n                    url: urlUtils.route('getAvailableLtiProviders', 'DeliveryMgmt', 'taoLtiConsumer'),\n                    data: {\n                        q: data.q,\n                        page: data.page\n                    },\n                    type: 'GET',\n                    dataType: 'JSON'\n                }).done(function(tests) {\n                    if (tests) {\n                        resolve(tests);\n                    } else {\n                        reject(new Error(__('Unable to load LTI providers')));\n                    }\n                }).fail(function() {\n                    reject(new Error(__('Unable to load LTI providers')));\n                });\n            });\n        }\n    };\n\n    return providers;\n\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n */\n/**\n * @author Martin Nicholson <martin@taotesting.com>\n */\ndefine('taoLtiConsumer/util/forms/deliveryFormHelper',[\n    'jquery',\n    'i18n',\n    'taoDeliveryRdf/util/forms/deliveryFormHelper'\n], function ($, __, deliveryFormHelper) {\n    'use strict';\n\n    return {\n        /**\n         * Set up the wizard form for publishing a LTI-based delivery\n         * @param {jQuery} $form\n         * @param {Object} providers - contains function(s) for fetching data\n         */\n        setupLtiForm($form, providers) {\n            const $reportContainer = $form.closest('.content-block');\n            const $providerFilterContainer = $('.lti-provider-select-container', $form);\n            const $providerInputElement = $('#ltiProvider', $form);\n\n            // Replace submit button with taskQueue requester\n            const ltiTaskButton = deliveryFormHelper.replaceSubmitWithTaskButton({\n                $form,\n                $reportContainer\n            });\n\n            // Enhanced selector input for LTI providers:\n            deliveryFormHelper.createSelectorInput({\n                $filterContainer: $providerFilterContainer,\n                $inputElement: $providerInputElement,\n                taskButton: ltiTaskButton,\n                dataProvider: {\n                    list: providers.listLtiProviders\n                },\n                inputPlaceholder: __('Select the Provider you want to publish'),\n                inputLabel: __('LTI Provider')\n            });\n        }\n    };\n});\n\n","\ndefine('css!taoLtiConsumerCss/wizard',[],function(){});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technlogies SA\n *\n */\n/**\n * @author Martin Nicholson <martin@taotesting.com>\n */\ndefine('taoLtiConsumer/controller/DeliveryMgmt/wizard',[\n    'jquery',\n    'taoDeliveryRdf/util/providers/testsProvider',\n    'taoLtiConsumer/util/providers/ltiProvider',\n    'taoDeliveryRdf/util/forms/deliveryFormHelper',\n    'taoLtiConsumer/util/forms/deliveryFormHelper',\n    'ui/tabs',\n    'css!taoLtiConsumerCss/wizard.css'\n], function($, testsProvider, ltiProvider, rdfDeliveryFormHelper, ltiDeliveryFormHelper, tabsFactory) {\n    'use strict';\n\n    // Extend data & behaviour providers:\n    const providers = Object.assign({}, testsProvider, ltiProvider);\n    const deliveryFormHelper = Object.assign({}, rdfDeliveryFormHelper, ltiDeliveryFormHelper);\n\n    return {\n        /**\n         * Creates a tabs component if multiple forms rendered\n         * Initialises the special input fields in the forms\n         * @returns {void}\n         */\n        start() {\n            const $multiForm = $('.multi-form-container');\n\n            // Extract tabs config from HTML data attrs:\n            const tabsData = $('[data-tab-content]', $multiForm)\n                .toArray()\n                .map(el => ({\n                    label: $(el).data('tab-label'),\n                    name: $(el).data('tab-content')\n                }));\n\n            const $tabContainer = $('.tab-selector', $multiForm);\n            const $tabsConstentContainer = $('.main-container');\n\n            tabsFactory($tabContainer, {\n                showHideTarget: $tabsConstentContainer,\n                tabs: tabsData\n            });\n\n            const tabNames = tabsData.map(t => t.name);\n\n            if (tabNames.includes('tao-local')) {\n                this.setupTaoLocalForm();\n            }\n            if (tabNames.includes('lti-based')) {\n                this.setupLtiForm();\n            }\n        },\n\n        // calls setup from taoDeliveryRdf\n        setupTaoLocalForm() {\n            const $tabContent = $('[data-tab-content=\"tao-local\"]');\n            const $form = $('#simpleWizard', $tabContent);\n\n            deliveryFormHelper.setupTaoLocalForm($form, providers);\n        },\n\n        // calls setup from taoLtiConsumer\n        setupLtiForm() {\n            const $tabContent = $('[data-tab-content=\"lti-based\"]');\n            const $form = $('#simpleLtiWizard', $tabContent);\n\n            deliveryFormHelper.setupLtiForm($form, providers);\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2019 (original work) Open Assessment Technlogies SA\n *\n */\n\ndefine('taoLtiConsumer/controller/routes',{\n    'DeliveryMgmt': {\n        'actions' : {\n            'wizard' : 'controller/DeliveryMgmt/wizard'\n        }\n    },\n});\n\n","\n(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('.section-container .content-block .multi-form-container{background:#f3f1ef;padding:30px;border:1px #ddd solid;border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px;min-width:550px}.section-container .content-block .multi-form-container form{background:inherit;padding:0;border:none}.section-container .content-block .multi-form-container form .form-toolbar .loading-button{float:right}.section-container .content-block .multi-form-container nav{margin-bottom:30px}\\n\\n/*# sourceMappingURL=taoLtiConsumerCss/wizard.css.map */');\n","\ndefine(\"taoLtiConsumer/loader/taoLtiConsumer.bundle\", function(){});\n","define(\"taoLtiConsumer/loader/taoLtiConsumer.min\", [\"taoDeliveryRdf/loader/taoDeliveryRdf.min\"], function(){});\n"]}